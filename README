# Connor Burbridge
# Bioinformatics technician
# Global Institute for Food Security
# connor.burbridge@gifs.ca
#
##########################################################################################
# Setup
# script to help automate the dge-read-prep step on a grouped basis
# looks for a samples_config.tsv file formatted as:
# treatment1	read-file0-R1.fq	read-file0-R2.fq	read-file1-R1.fq...
# treatment2	read-file0-R1.fq	read-file2-R2.fq ...
# and so on
# two other files are also required for the script to run:
# one file that contains the BASE NAME of the control read files mentioned above
# i.e.
# read-file0-
# read-file1-
# and the same type of file for the treatment condition. Please make sure that the names
# of these files match the treatment name in the samples_config.tsv file.
# You should also ensure that you have Trimmomatic, FastQC, Hisat2, StringTie, R and the 
# DESeq2 R library installed and in your current path for things to run smoothly.
#
##########################################################################################
# Genome preparation
# Prior to running analysis you should have the genome indexed. You should also ahve the 
# appropriate gff file for the genome of interest. When you have these, you must update 
# the genome and gff paths in teh dge-read-preparation.sh script to the paths of your 
# files. The genome must me indexed using the program Hisat2.
#
##########################################################################################
# Usage
# To run this script, enter the directory that contains the samples_config.tsv, 
# treatment1.txt and treatment2.txt files and run the command below:
# Command: python group-dge-read-prep.py path-to-reads-dir threads treatment1-count treatment2-count
# path-to-dir: absolute path to the directory that contains all read files
# threads: number of threads to use during analysis
# treatment1-count: number of samples associated with treatment1
# treatment2-count: number of samples associated with treatment2
#
##########################################################################################
# This script performs some checks that prevents re-doing analysis when results files are
# are already present. Should the pipeline fail at any step, please remove the output files
# from the most recent step and run the same command again. The pipeline should pick up 
# at that step.
# Also, should you want to remove ALL directories and files generated by the pipeline,
# run the following command from the directory containing the samples_config.tsv and 
# treatment files.
# command: python group-dge-read-prep.py clean
# This command will PERMANENTLY delete all results generated from any previous analyses.
# Be careful!
# It is also recommended that you re-direct the STDOUT from this pipeline to a log file
# with a simple > log.txt (or >> log.txt to append) at the end of any command.
#
##########################################################################################
